<!DOCTYPE html>
<html lang="en">
<head>

</head>
<body>
<main>

    <h2>Register</h2>
    <div>    
        <div class="col-sm col-md-4">    
            <form action="registerSubmission" name="registrationForm" method="GET">
                <div class="form-group">
                    <label for="email">Email address</label>
                    <input type="email" class="form-control" id="email" name="email" value="wmitty@email.com" required>
                </div>
                <div >
                    <label for="passwordID">Password</label> 
                    <input type="password" class="form-control" id="password" name="password" value="password" required>
                </div> 
                <div >
                    <label for="reenterPasswordID">Re-Enter Password</label> 
                    <input type="reenterPassword" class="form-control" id="reenterPassword" name="reenterPassword" value="password" required>
                </div>   
                <div>
                    <input type='submit' class="btn btn-primary" id="submit" value="Register">
                </div>
                <div id="message"></div>
            </form>

        </div> 
    </div>   
    


</main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>

    <script src="custom-js/custom.js"></script>   
    <script src="custom-js/login.js"></script>  
    <script src="script.js"></script>
    <script>
        
        const loginButton = document.getElementById('submit');
        loginButton.addEventListener('click', emailValid);
        const messageDiv = document.getElementById('message');

        function emailValid(){
            messageDiv.innerHTML = "";
            let isValid = false;
            if (email.value.includes("@")){
                isValid = true;
                
                comparePasswords();
            }
            else{
                isValid = false;
            }
        }
    
    function comparePasswords(){
        if (password.value == reenterPassword.value){
            setJSON();
        }
        else{
            event.preventDefault();
            messageDiv.innerHTML = "";
            const failMessage = document.createElement('p');
            failMessage.innerHTML = "Passwords do not match. Please try again";
            messageDiv.appendChild(failMessage);
            }
        }

        function setJSON(){
            const email = document.getElementById('email');
            const emailValue = email.value;
            const password = document.getElementById('password');
            const passwordDetails = password.value;
            const userLoginDetails = 
            {
                "email":emailValue,
                "password":passwordDetails 
            }

            localStorage.setItem("loginDetails", JSON.stringify(userLoginDetails));

        }
    </script>
   
    
</body>
</html>