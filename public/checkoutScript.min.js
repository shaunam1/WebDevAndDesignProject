function emailValid(){getEmail.value.includes("@")?(isValid=!0,checkBasket(event)):isValid=!1}function checkBasket(e){null===obj2?(e.preventDefault(),window.alert("There is nothing in your basket!")):compare(e)}function compare(e){if(paymentDiv.innerText="",cardDiv.innerText="","123"===cardCVV.value&&emailAddress.value===regEmail.email&&firstName.value===obj.firstName&&lastName.value===obj.lastName&&address1.value===obj.address1&&address2.value===obj.address2&&address3.value===obj.address3)cartValue=0,localStorage.setItem("cartCount",cartValue),localStorage.removeItem("productInCart");else{if(e.preventDefault(),emailAddress.value!==regEmail.email||firstName.value!==obj.firstName||lastName.value!==obj.lastName||address1.value!==obj.address1||address2.value!==obj.address2||address3.value!==obj.address3){const e=document.createElement("p");e.innerText="The delivery details you have entered do not match those specified in your User Details. Please try again.",paymentDiv.appendChild(e)}if("123"!==cardCVV.value){const e=document.createElement("p");e.innerText="The card details you have entered are incorrect. Please try again.",cardDiv.appendChild(e)}}}let isValid=!1;const displayProductDiv=document.createElement("div"),submitButton=document.getElementById("buy-now"),delivery=document.getElementById("delivery"),paymentDetails=document.getElementById("payment"),paymentDiv=document.getElementById("paymentResults"),cardDiv=document.getElementById("cardResults"),json=localStorage.getItem("form"),obj=JSON.parse(json),product=localStorage.getItem("productInCart"),obj2=JSON.parse(product),registration=localStorage.getItem("loginDetails"),regEmail=JSON.parse(registration),myDiv=document.getElementById("testDiv"),emailAddress=document.getElementById("getEmail"),cardCVV=document.getElementById("cardCVV"),email=document.getElementById("getEmail"),firstName=document.getElementById("getFirstName"),lastName=document.getElementById("getLastName"),address1=document.getElementById("getAddress1"),address2=document.getElementById("getAddress2"),address3=document.getElementById("getAddress3");submitButton.addEventListener("click",emailValid),sessionStorage.getItem("loginState")?"Login"===sessionStorage.getItem("loginState")?(delivery.style.display="none",paymentDetails.style.display="none",submitButton.style.display="none",window.alert("Please login to checkout")):(delivery.style.display="block",paymentDetails.style.display="block",submitButton.style.display="block"):(delivery.style.display="none",paymentDetails.style.display="none",submitButton.style.display="none",window.alert("Please login to checkout")),email.value=regEmail.email,firstName.value=obj.firstName,lastName.value=obj.lastName,address1.value=obj.address1,address2.value=obj.address2,address3.value=obj.address3,function(){const e=document.createElement("p");let t=0;obj2&&(obj2.constructor===Array?obj2.forEach(a=>{e.innerHTML+=a.name+"</br>",e.innerHTML+="€"+a.price+"</br>",e.innerHTML+="</br>",t+=a.price}):(e.innerHTML+=obj2.name+"</br>",e.innerHTML+="€"+obj2.price+"</br>"));let a=t.toFixed(2);e.innerHTML+="Total: €"+a,displayProductDiv.appendChild(e),myDiv.appendChild(displayProductDiv)}();